import{g as I,C as _,o as q,c as z,a as n,b as e,w as t,h as i,p as v,E as m,k as R,D as F,B as N,l as P,n as y,F as A,G as D,s as g,H as T,q as V,y as $,m as j,I as G,A as H,j as L}from"./index-8ca8e5f0.js";/* empty css                *//* empty css                 *//* empty css                *//* empty css                  */const M={style:{"text-align":"center",margin:"0 20px"}},S=n("div",{style:{"margin-top":"100px"}},[n("div",{style:{"font-size":"25px","font-weight":"bold"}},"注册新用户"),n("div",{style:{"font-size":"14px",color:"grey"}},"欢迎注册我们的学习平台，请在下方填写相关信息")],-1),Z={style:{"margin-top":"50px"}},J={style:{"margin-top":"80px"}},K={style:{"margin-top":"20px"}},O=n("span",{style:{"font-size":"14px","line-height":"15px",color:"grey"}},"已有账号? ",-1),se={__name:"RegisterPage",setup(Q){const l=I({username:"",password:"",password_repeat:"",email:"",code:""}),h={username:[{validator:(o,a,s)=>{a===""?s(new Error("请输入用户名")):/^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(a)?s():s(new Error("用户名不能包含特殊字符，只能是中文/英文"))},trigger:["blur","change"]},{min:2,max:8,message:"用户名的长度必须在2-8个字符之间",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"密码的长度必须在6-16个字符之间",trigger:["blur","change"]}],password_repeat:[{validator:(o,a,s)=>{a===""?s(new Error("请再次输入密码")):a!==l.password?s(new Error("两次输入的密码不一致")):s()},trigger:["blur","change"]}],email:[{required:!0,message:"请输入邮件地址",trigger:"blur"},{type:"email",message:"请输入合法的电子邮件地址",trigger:["blur","change"]}],code:[{required:!0,message:"请输入获取的验证码",trigger:"blur"}]},f=_(),c=_(!1),d=_(0),E=(o,a)=>{o==="email"&&(c.value=a)},b=()=>{f.value.validate(o=>{o?v("/api/auth/register",{username:l.username,password:l.password,email:l.email,code:l.code},a=>{m.success(a),V.push("/")}):m.warning("请完整填写注册表单内容！")})},U=()=>{d.value=60,v("/api/auth/valid-register-email",{email:l.email},o=>{m.success(o),setInterval(()=>d.value--,1e3)},o=>{m.warning(o),d.value=0})};return(o,a)=>{const s=$,p=j,u=G,w=H,x=R,k=L,C=F,B=N;return q(),z("div",M,[S,n("div",Z,[e(C,{model:l,rules:h,onValidate:E,ref_key:"formRef",ref:f},{default:t(()=>[e(u,{prop:"username"},{default:t(()=>[e(p,{modelValue:l.username,"onUpdate:modelValue":a[0]||(a[0]=r=>l.username=r),maxlength:8,type:"text",placeholder:"用户名"},{prefix:t(()=>[e(s,null,{default:t(()=>[e(i(P))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password"},{default:t(()=>[e(p,{modelValue:l.password,"onUpdate:modelValue":a[1]||(a[1]=r=>l.password=r),maxlength:16,type:"password",placeholder:"密码"},{prefix:t(()=>[e(s,null,{default:t(()=>[e(i(y))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"password_repeat"},{default:t(()=>[e(p,{modelValue:l.password_repeat,"onUpdate:modelValue":a[2]||(a[2]=r=>l.password_repeat=r),maxlength:16,type:"password",placeholder:"重复密码"},{prefix:t(()=>[e(s,null,{default:t(()=>[e(i(y))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"email"},{default:t(()=>[e(p,{modelValue:l.email,"onUpdate:modelValue":a[3]||(a[3]=r=>l.email=r),type:"email",placeholder:"电子邮件地址"},{prefix:t(()=>[e(s,null,{default:t(()=>[e(i(A))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"code"},{default:t(()=>[e(k,{gutter:10,style:{width:"100%"}},{default:t(()=>[e(w,{span:17},{default:t(()=>[e(p,{modelValue:l.code,"onUpdate:modelValue":a[4]||(a[4]=r=>l.code=r),maxlength:6,type:"text",placeholder:"请输入验证码"},{prefix:t(()=>[e(s,null,{default:t(()=>[e(i(D))]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{span:5},{default:t(()=>[e(x,{type:"success",onClick:U,disabled:!c.value||d.value>0},{default:t(()=>[g(T(d.value>0?"请稍后 "+d.value+" 秒":"获取验证码"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),n("div",J,[e(x,{style:{width:"270px"},type:"warning",onClick:b,plain:""},{default:t(()=>[g("立即注册")]),_:1})]),n("div",K,[O,e(B,{type:"primary",style:{translate:"0 -2px"},onClick:a[5]||(a[5]=r=>i(V).push("/"))},{default:t(()=>[g("立即登录")]),_:1})])])}}};export{se as default};
